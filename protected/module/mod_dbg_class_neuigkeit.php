<?php
$xhtml = '<h1>CNeuigkeit</h1>'."\n";

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
$xhtml .= '<h2>Neue Instanz</h2>'."\n";
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

$theObj = new CNeuigkeit();
$xhtml .= '<p>'.$theObj.'</p>'."\n";

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
$xhtml .= '<h2>Datenprüfung</h2>'."\n";
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

$theObj->setAthletID(0);
$theObj->setTitel('MustermannMustermannMustermannMustermannMustermannMustermannMustermannMustermannMustermannMustermannM');
//$Inhalt = 'a'; for($i=0; $i<65535; $i++) $Inhalt .= 'a';
$Inhalt = 'Hallo [hier] ist ein [Fehler} versteckt.';
$theObj->setInhalt($Inhalt);
$theObj->setEingestellt('09-01-24');
$theObj->setGueltigBis('2009-01-32');



$xhtml .= '<p>Objekt wird jetzt ...';
//$theObj->save();
$xhtml .= '... gespeichert. ID ist '.$theObj->getNeuigkeitID().', __toString(): '.$theObj.'</p>'."\n";

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
$xhtml .= '<h2>Setter</h2>'."\n";
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

$theObj->setNeuigkeitID(99887766);
$theObj->setAthletID(14);
$theObj->setTitel('Eine Neuigkeit');
$theObj->setInhalt('Hallo <em>Du</em>! Auf der {startseite} findest Du weitere Informationen.');
$theObj->setEingestellt('2009-01-20');
$theObj->setGueltigBis('2009-01-24');

$xhtml .= '<pre><code>'."\n";
$xhtml .= print_r($theObj, true);
$xhtml .= '</code></pre>'."\n";

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
$xhtml .= '<h2>Getter</h2>'."\n";
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

$xhtml .= '<p>'."\n";
$xhtml .= 'getNeuigkeitID(): '.$theObj->getNeuigkeitID().'<br />'."\n";
$xhtml .= 'getAthletID(): '.$theObj->getAthletID().'<br />'."\n";
$xhtml .= 'getTitel(): '.$theObj->getTitel().'<br />'."\n";
$xhtml .= 'getInhalt(): '.$theObj->getInhalt().'<br />'."\n";
$xhtml .= 'getEingestellt(): '.$theObj->getEingestellt().'<br />'."\n";
$xhtml .= 'getGueltigBis(): '.$theObj->getGueltigBis().'<br />'."\n";
$xhtml .= '</p>'."\n";

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
$xhtml .= '<h2>Datensatz speichern</h2>'."\n";
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

$xhtml .= '<p>Objekt wird jetzt ...';
$theObj->save();
$xhtml .= '... gespeichert. ID ist '.$theObj->getNeuigkeitID().', __toString(): '.$theObj.'</p>'."\n";

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
$xhtml .= '<h2>Datensatz laden</h2>'."\n";
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

$theObj->load($theObj->getNeuigkeitID());

$xhtml .= '<p>'."\n";
$xhtml .= 'load('.$theObj->getNeuigkeitID().'): '.$theObj.'<br />'."\n";
$xhtml .= '</p>'."\n";

$xhtml .= '<pre><code>'."\n";
$xhtml .= print_r($theObj, true);
$xhtml .= '</code></pre>'."\n";

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
$xhtml .= '<h2>Datensatz ändern und speichern</h2>'."\n";
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

$theObj->setAthletID(14);
$theObj->setTitel('Eine Neuigkeit');
$theObj->setInhalt('Hallo! Unter {spielbetrieb} und {training} findest Du weitere <em>wichtige</em> Informationen.');
$theObj->setEingestellt('2009-01-20');
$theObj->setGueltigBis('2009-01-24');

$xhtml .= '<p>Objekt wird jetzt ...';
$theObj->save();
$xhtml .= '... gespeichert. ID ist '.$theObj->getNeuigkeitID().', __toString(): '.$theObj.'</p>'."\n";

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
$xhtml .= '<h2>Vermischtes</h2>'."\n";
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

$xhtml .= $theObj->getXHTML();

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
$xhtml .= '<h2>Datensatz löschen</h2>'."\n";
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

$xhtml .= '<p>Objekt wird jetzt ...';
$theObj->delete();
$xhtml .= '... gelöscht: '.$theObj.'</p>'."\n";

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// RETURN
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

$data['xhtml'] = $xhtml;
return new CTemplateData($data, true);
?>