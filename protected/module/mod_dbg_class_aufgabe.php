<?php
$xhtml = '<h1>CAufgabe</h1>'."\n";

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
$xhtml .= '<h2>Neue Instanz</h2>'."\n";
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

$theObj = new CAufgabe();
$xhtml .= '<p>'.$theObj.'</p>'."\n";

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
$xhtml .= '<h2>Datenprüfung</h2>'."\n";
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

$theObj->setBezMaennlich('MustermannMustermannMustermannM');
$theObj->setBezWeiblich('');
$theObj->setAufgabentyp(4);
$theObj->setSortierung(999);
$Freitext = 'a'; for($i=0; $i<65535; $i++) $Freitext .= 'a';
//$Freitext = 'Hallo [hier] ist ein [Fehler} versteckt.';
$theObj->setFreitext($Freitext);

$xhtml .= '<p>Objekt wird jetzt ...';
//$theObj->save();
$xhtml .= '... gespeichert. ID ist '.$theObj->getAufgabeID().', __toString(): '.$theObj.'</p>'."\n";

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
$xhtml .= '<h2>Setter</h2>'."\n";
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

$theObj->setAufgabeID(99887766);
$theObj->setBezMaennlich('Dorfdepp');
$theObj->setBezWeiblich('Dorfdeppin');
$theObj->setAufgabentyp(S_TRABETRIEB);
$theObj->setSortierung(155);
$theObj->setFreitext('Hallo <em>Du</em>! Hier sind alle Infos zur Aufgabe.');

$xhtml .= '<pre><code>'."\n";
$xhtml .= print_r($theObj, true);
$xhtml .= '</code></pre>'."\n";

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
$xhtml .= '<h2>Getter</h2>'."\n";
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

$xhtml .= '<p>'."\n";
$xhtml .= 'getAufgabeID(): '.$theObj->getAufgabeID().'<br />'."\n";
$xhtml .= 'getBezMaennlich(): '.$theObj->getBezMaennlich().'<br />'."\n";
$xhtml .= 'getBezWeiblich(): '.$theObj->getBezWeiblich().'<br />'."\n";
$xhtml .= 'getAufgabentyp(): '.$theObj->getAufgabentyp().'<br />'."\n";
$xhtml .= 'getAufgabentyp(GET_C2SC): '.$theObj->getAufgabentyp(GET_C2SC).'<br />'."\n";
$xhtml .= 'getSortierung(): '.$theObj->getSortierung().'<br />'."\n";
$xhtml .= 'getFreitext(): '.$theObj->getFreitext().'<br />'."\n";
$xhtml .= '</p>'."\n";

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
$xhtml .= '<h2>Datensatz speichern</h2>'."\n";
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

$xhtml .= '<p>Objekt wird jetzt ...';
$theObj->save();
$xhtml .= '... gespeichert. ID ist '.$theObj->getAufgabeID().', __toString(): '.$theObj.'</p>'."\n";

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
$xhtml .= '<h2>Datensatz laden</h2>'."\n";
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

$theObj->load($theObj->getAufgabeID());
$xhtml .= '<p>'."\n";
$xhtml .= 'load('.$theObj->getAufgabeID().'): '.$theObj.'<br />'."\n";
$xhtml .= '</p>'."\n";

$xhtml .= '<pre><code>'."\n";
$xhtml .= print_r($theObj, true);
$xhtml .= '</code></pre>'."\n";

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
$xhtml .= '<h2>Datensatz ändern und speichern</h2>'."\n";
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

$theObj->setBezMaennlich('Dorfdepp');
$theObj->setBezWeiblich('Dorfdeppin');
$theObj->setAufgabentyp(S_VERWALTUNG);
$theObj->setSortierung(155);
$theObj->setFreitext('Tolle Aufgabe, diese Aufgabe!');

$xhtml .= '<p>Objekt wird jetzt ...';
$theObj->save();
$xhtml .= '... gespeichert. ID ist '.$theObj->getAufgabeID().', __toString(): '.$theObj.'</p>'."\n";

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
$xhtml .= '<h2>Vermischtes</h2>'."\n";
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

$xhtml .= '<p>keine \'misc\'-funktionen deklariert</p>';

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
$xhtml .= '<h2>Datensatz löschen</h2>'."\n";
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

$xhtml .= '<p>Objekt wird jetzt ...';
$theObj->delete();
$xhtml .= '... gelöscht: '.$theObj.'</p>'."\n";

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// RETURN
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

$data['xhtml'] = $xhtml;
return new CTemplateData($data, true);
?>